(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d47856c4"],{"30ec":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-live flex justify-center"},[i("div",{staticClass:"container-video flex justify-center flex-col items-center bg-black p-2 relative radius",staticStyle:{overflow:"hidden"}},[i("video",{ref:"video",attrs:{id:"video",src:t.src,autoplay:"",poster:s("b8b5"),muted:""},domProps:{muted:!0}}),i("div",{staticClass:"living-controls-wrapper mt-2 flex w-full items-center"},[i("span",{staticClass:"text-white mr-auto"},[t._v("状态: "+t._s(t.statusText))]),i("el-input",{staticClass:"live-input",attrs:{placeholder:"请输入直播号",size:"mini"},model:{value:t.liveId,callback:function(e){t.liveId=e},expression:"liveId"}}),i("el-button",{attrs:{type:"primary"},on:{click:t.setVideo}},[t._v("播放影片")]),"initial"==t.status?i("el-button",{attrs:{type:"primary"},on:{click:t.start}},[t._v("开始直播")]):"starting"!=t.status?i("el-button",{staticClass:"ml-3",attrs:{type:"danger"},on:{click:t.stop}},[t._v("停止直播")]):t._e()],1)]),i("div",{staticClass:"container-message rounded ml-4 flex flex-col justify-between bg-gray-200 radius"},[i("div",{staticClass:"wrapper-messages bg-gray-100 border p-2 overflow-y-auto radius"},[t._l(t.interactions,function(e){return["start"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-gray-500 text-center rounded-full"},[i("span",{staticClass:"font-bold mr-1 text-yellow-300"},[t._v("直播已开始")])]):t._e(),"viewer-entry"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-gray-500 text-center rounded-full"},[i("span",[t._v(t._s(e.time))]),i("img",{staticClass:"w-6 mx-1 rounded-full",attrs:{src:e.from.avatar,alt:""}}),i("span",{staticClass:"font-bold mr-1 text-blue-600"},[t._v(t._s(e.from.nickname))]),t._m(0,!0)]):t._e(),"viewer-leave"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-red-300 text-center interaction-text-box"},[i("span",[t._v(t._s(e.time))]),i("img",{staticClass:"w-6 mx-1 rounded-full",attrs:{src:e.from.avatar,alt:""}}),i("span",{staticClass:"font-bold mr-1 text-blue-900"},[t._v(t._s(e.from.nickname))]),t._m(1,!0)]):t._e(),"stop"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-red-600 text-center rounded-full"},[i("span",{staticClass:"font-bold mr-1 text-blue-900"},[t._v("直播已结束")])]):t._e(),"interaction"==e.type?i("div",{key:e.id,staticClass:"interaction-text-box"},[i("span",{staticClass:"interaction-text"},[t._v(t._s(e.user)+":")]),i("span",{staticClass:"interaction-text"},[t._v(t._s(e.msg))])]):t._e()]})],2),i("div",{staticClass:"wrapper-input mx-auto p-2",attrs:{radius:""}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"border h-8 rounded",attrs:{type:"text"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"输入发送内容",size:"small",type:"warning"},on:{click:t.send}},[t._v("发送")])],1)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t._v("已 "),s("b",[t._v("进入")]),t._v(" 直播间")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t._v("已 "),s("b",[t._v("离开")]),t._v(" 直播间")])}],a=(s("d5db"),{name:"page-presentor",data:function(){return{src:null,status:"initial",liveId:"",interactions:[],msg:"",messages:[]}},computed:{statusText:function(){var t={initial:"未开始",starting:"准备中",living:"直播中",ending:"结束中",ended:"已结束"};return t[this.status]}},created:function(){var t=this;window.addEventListener("unload",function(){t.stop()})},beforeDestroy:function(){console.log("before destroy"),this.stop()},methods:{start:function(){RtcUtils.video=document.getElementById("video"),RtcUtils.videoOutput=document.getElementById("video2"),localStorage.setItem("liveId",this.liveId),RtcUtils.presenter()},setVideo:function(){var t=document.getElementById("video");this.src||(this.src="@/assets/test.mp4"),t.play(),t.parsed=!1},init:function(){var t=this;RtcUtils.init(),RtcUtils.notice.on("living",function(){t.status="living",t.interactions.push({type:"start"})}),RtcUtils.notice.on("interactionAdd",function(e){t.interactions.push(e),RtcUtils.wordMove(e.msg)})},send:function(){this.msg&&(RtcUtils.interaction(this.msg),this.msg="")},stop:function(){RtcUtils.stop(),this.status="initial",this.interactions.push({type:"stop"})}},mounted:function(){this.init()}}),r=a,l=(s("cc2d"),s("2877")),o=Object(l["a"])(r,i,n,!1,null,"091e5474",null);e["default"]=o.exports},cc2d:function(t,e,s){"use strict";var i=s("f673"),n=s.n(i);n.a},f673:function(t,e,s){}}]);
//# sourceMappingURL=chunk-d47856c4.2bff10ac.js.map