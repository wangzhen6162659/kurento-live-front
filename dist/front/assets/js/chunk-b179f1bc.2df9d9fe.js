(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b179f1bc"],{1502:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-live flex justify-center"},[i("div",{staticClass:"container-video flex justify-center flex-col p-2 items-center bg-black relative radius",staticStyle:{overflow:"hidden"}},[i("video",{ref:"video",staticClass:"video w-full m-2",attrs:{id:"video",src:t.src,autoplay:"",poster:s("b8b5")}}),i("div",{staticClass:"living-controls-wrapper m-1 pl-2 flex w-full items-center"},[i("span",{staticClass:"text-white mr-auto"},[t._v("状态: "+t._s(t.statusText))])])]),i("div",{staticClass:"container-message w-68 rounded ml-4 flex flex-col justify-between bg-gray-200 radius"},[i("div",{staticClass:"wrapper-messages bg-gray-100 border p-2 overflow-y-auto radius"},[t._l(t.interactions,function(e){return["start"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-gray-500 text-center rounded-full"},[i("span",{staticClass:"font-bold mr-1 text-yellow-300"},[t._v("直播已开始")])]):t._e(),"viewer-entry"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-gray-500 text-center rounded-full"},[i("span",[t._v(t._s(e.time))]),i("img",{staticClass:"w-6 mx-1 rounded-full",attrs:{src:e.from.avatar,alt:""}}),i("span",{staticClass:"font-bold mr-1 text-blue-600"},[t._v(t._s(e.from.nickname))]),t._m(0,!0)]):t._e(),"viewer-leave"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-red-300 text-center interaction-text-box"},[i("span",[t._v(t._s(e.time))]),i("img",{staticClass:"w-6 mx-1 rounded-full",attrs:{src:e.from.avatar,alt:""}}),i("span",{staticClass:"font-bold mr-1 text-blue-900"},[t._v(t._s(e.from.nickname))]),t._m(1,!0)]):t._e(),"stop"==e.type?i("div",{key:e.id,staticClass:"message-item flex justify-center py-1 items-center mb-2 text-sm bg-red-600 text-center rounded-full"},[i("span",{staticClass:"font-bold mr-1 text-blue-900"},[t._v("直播已结束")])]):t._e(),"interaction"==e.type?i("div",{key:e.id,staticClass:"interaction-text-box"},[i("span",{staticClass:"interaction-text"},[t._v(t._s(e.user)+":")]),i("span",{staticClass:"interaction-text"},[t._v(t._s(e.msg))])]):t._e()]})],2),i("div",{staticClass:"wrapper-input mx-auto p-2"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],staticClass:"border h-8 rounded",attrs:{type:"text"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),i("el-button",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"输入发送内容",size:"small",type:"warning"},on:{click:t.send}},[t._v("发送")])],1)])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t._v("已 "),s("b",[t._v("进入")]),t._v(" 直播间")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t._v("已 "),s("b",[t._v("离开")]),t._v(" 直播间")])}],a=(s("4777"),{name:"page-live",data:function(){return{src:null,status:"initial",msg:"",isInit:!1,interactions:[]}},computed:{statusText:function(){var t={initial:"未开始",starting:"准备中",living:"直播中",ending:"结束中",ended:"已结束"};return t[this.status]}},created:function(){var t=this;window.addEventListener("unload",function(){t.stop()})},beforeDestroy:function(){console.log("before destroy"),this.stop()},methods:{start:function(){var t=this.$route.params.liveId;RtcUtils.video=document.getElementById("video"),localStorage.setItem("liveId",t),RtcUtils.viewer()},init:function(){var t=this;RtcUtils.init(),RtcUtils.notice.on("living",function(){t.status="living",t.interactions.push({type:"start"})}),RtcUtils.notice.on("interactionAdd",function(e){t.interactions.push(e),console.log(t.interactions),RtcUtils.wordMove(e.msg)}),RtcUtils.notice.on("stop",function(e){t.status="ended",t.interactions.push({type:"stop"})})},send:function(){this.msg&&(RtcUtils.interaction(this.msg),this.msg="")},stop:function(){RtcUtils.stop(),this.status="initial"}},mounted:function(){this.start(),this.init()}}),r=a,o=(s("eb17"),s("2877")),c=Object(o["a"])(r,i,n,!1,null,"a775d29e",null);e["default"]=c.exports},"403a":function(t,e,s){},4777:function(t,e){},b8b5:function(t,e,s){t.exports=s.p+"assets/img/webrtc.cde75bd7.png"},eb17:function(t,e,s){"use strict";var i=s("403a"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-b179f1bc.2df9d9fe.js.map