(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c584fe1"],{"40e5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-accept mx-8"},[a("el-row",{attrs:{type:"flex my-4"}},[a("el-col",{staticClass:"flex items-center",attrs:{span:20}},[a("h1",{staticClass:"font-bold text-2xl"},[t._v("正在通话")])]),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.$router.back()}}},[t._v("挂断")])],1)],1),a("el-row",{staticClass:"mx-4",attrs:{gutter:20}},[a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.friendLoading,expression:"friendLoading"}],staticClass:"transition-all",attrs:{span:12,offset:3,"element-loading-text":"正在连接...","element-loading-spinner":"el-icon-loading"}},[a("video",{ref:"friend-video",staticClass:"w-full",attrs:{src:"",autoplay:"",poster:n("b8b5")}}),a("p",{staticClass:"text-center"},[t._v(t._s(t.inviter.nickname))])]),a("el-col",{directives:[{name:"loading",rawName:"v-loading",value:t.selfLoading,expression:"selfLoading"}],staticClass:"transition-all",attrs:{span:6,"element-loading-text":"正在连接...","element-loading-spinner":"el-icon-loading"}},[a("video",{ref:"self-video",staticClass:"w-full",attrs:{src:"",autoplay:"",poster:n("b8b5"),muted:""},domProps:{muted:!0}}),a("p",{staticClass:"text-center"},[t._v("我")])])],1)],1)},i=[],s=n("d5db"),o=n("4777"),l=n.n(o),r=null,c=null,d={name:"page-accept",data:function(){return{inviter:{},selfLoading:!1,friendLoading:!1}},watch:{"$route.query":{immediate:!1,handler:function(){var t=decodeURIComponent(this.$route.query.inviter||""),e=t&&JSON.parse(t),n=decodeURIComponent(this.$route.query.linkId||"");e&&n&&this.acceptCall(e,n)}}},created:function(){window.addEventListener("unload",this.stopCall),this.stopCall()},mounted:function(){var t=decodeURIComponent(this.$route.query.inviter||""),e=t&&JSON.parse(t),n=decodeURIComponent(this.$route.query.linkId||"");e&&n&&this.acceptCall(e,n)},beforeDestroy:function(){this.stopCall(),window.removeEventListener("unload",this.stopCall)},methods:{acceptCall:function(t,e){var n=this;this.inviter=t,this.selfLoading=!0,this.friendLoading=!0,r=new s["a"](this.$refs["self-video"]),r.on("start",function(){n.selfLoading=!1,r.socket.emit("acceptcall",{from:t})}),r.start(null,!1),c=new l.a(this.$refs["friend-video"],e),c.on("start",function(t){n.friendLoading=!1}),c.on("presentorgone",function(t){n.stopCall(),n.$router.back()}),c.start()},stopCall:function(){r&&r.stop(),c&&c.stop()}}},u=d,f=(n("fd2b"),n("2877")),p=Object(f["a"])(u,a,i,!1,null,null,null);e["default"]=p.exports},4777:function(t,e){},ad9f:function(t,e,n){},fd2b:function(t,e,n){"use strict";var a=n("ad9f"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-6c584fe1.5fe072cf.js.map